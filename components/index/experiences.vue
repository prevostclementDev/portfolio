<template>
  <section id="experiences">
    <h2 class="rotateOpacity">Mes expériences</h2>
    <section id="list-experiences">
      <ul class="list">
        <li class="centerAppariation experience-item">
          <div class="container-img">
            <svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120" fill="none">
              <path d="M107.235 52.9964L98.6684 78.0933L89.2629 52.9964H76.4141L76.562 53.3289C87.4969 55.8427 95.7177 66.6264 95.7177 79.5485C95.7177 85.4161 94.0216 90.8412 91.1474 95.2528C90.3658 96.7556 89.416 98.0411 88.2973 99.1058C87.804 99.5755 87.2687 100.023 86.6966 100.452C84.5672 102.353 82.1413 103.858 79.5082 104.868L82.4612 113.128C88.0593 111.33 92.4261 109.001 95.5623 106.138C98.6969 103.274 101.328 99.2317 103.456 94.0103L120.001 52.9956H107.235L107.235 52.9964Z" fill="#1C1919" fill-opacity="0.7"/>
              <path d="M42.4809 70.8261C42.4809 68.7556 42.2872 67.0599 41.9005 65.7358C41.5138 64.4133 40.8997 63.0908 40.0625 61.7675L50.4126 58.1438C52.2821 59.9851 53.3783 62.1702 53.7012 64.7006C57.8922 60.3869 63.0842 58.2305 69.2747 58.2305C73.3374 58.2305 76.9646 59.0931 80.1571 60.819C83.3488 62.5441 85.8476 65.0459 87.654 68.3243C89.459 71.6027 90.3623 75.5145 90.3623 80.0573C90.3623 84.6002 89.4433 88.5119 87.6052 91.7903C85.7672 95.0687 83.2039 97.5569 79.9153 99.2527C76.6267 100.95 72.8208 101.797 68.5006 101.797C65.7924 101.797 63.3087 101.351 61.0525 100.46C58.7947 99.5686 56.8599 98.3464 55.2486 96.7931V120H42.4801V70.8253L42.4809 70.8261ZM77.5945 80.0573C77.5945 75.9744 76.659 72.8257 74.7895 70.6104C72.9184 68.3975 70.2095 67.2891 66.6641 67.2891C62.8582 67.2891 59.9728 68.3673 58.0064 70.5245C56.0385 72.6809 55.0564 75.5718 55.0564 79.1947V80.7472C55.0564 84.0837 56.0235 86.9157 57.9583 89.2448C59.8932 91.5739 62.6652 92.7389 66.2774 92.7389C73.8224 92.7389 77.5953 88.5119 77.5953 80.0573H77.5945Z" fill="#1C1919" fill-opacity="0.7"/>
              <path d="M62.8544 53.6517C64.2457 53.2913 65.6407 53.0839 66.9831 53.0183V0H54.3311V60.0577C54.9137 57.4511 58.185 54.8626 62.8551 53.6517H62.8544Z" fill="#1C1919" fill-opacity="0.7"/>
              <path d="M9.90033 56.3187C6.81971 54.6569 4.39906 52.2501 2.63989 49.0977C0.879211 45.9475 0 42.1933 0 37.8374C0 33.1958 0.89573 29.1853 2.68719 25.8028C4.47865 22.4219 6.9924 19.8432 10.2307 18.066C13.4675 16.2903 17.2554 15.4014 21.5929 15.4014C26.6842 15.4014 30.9278 17.1499 34.3223 20.6447V16.2609H46.2971V46.2611C46.2971 48.2675 46.4856 49.9293 46.8633 51.2466C47.2402 52.5653 47.8371 53.8833 48.6547 55.2006L38.5659 58.8107C36.6799 56.9197 35.6107 54.7708 35.3599 52.364H35.1715C33.4108 54.427 31.2582 56.0171 28.7129 57.1346C26.1669 58.252 23.3858 58.8107 20.3683 58.8107C16.47 58.8107 12.9809 57.979 9.90183 56.318L9.90033 56.3187ZM31.2094 46.562C33.0954 44.4131 34.0377 41.5335 34.0377 37.9226V36.3754C34.0377 33.0525 33.1097 30.2296 31.2559 27.908C29.4014 25.5872 26.745 24.4268 23.2882 24.4268C19.8314 24.4268 17.0797 25.5736 15.2267 27.865C13.3721 30.1579 12.4449 33.4823 12.4449 37.8367C12.4449 41.7349 13.3406 44.7003 15.132 46.7339C16.9235 48.7689 19.5168 49.7853 22.9106 49.7853C26.5558 49.7853 29.3226 48.7109 31.2079 46.562H31.2094Z" fill="#1C1919" fill-opacity="0.7"/>
              <path d="M37.7063 108.625C38.9699 109.532 39.6013 110.742 39.6013 112.257C39.6013 113.257 39.3573 114.155 38.8685 114.952C38.3805 115.748 37.6725 116.373 36.746 116.827C35.8195 117.28 34.7165 117.506 33.4356 117.506C32.0714 117.506 30.8918 117.28 29.8977 116.827C28.9044 116.373 28.1461 115.741 27.6235 114.929C27.1017 114.117 26.8404 113.171 26.8404 112.094C26.8404 111.422 26.971 110.84 27.2316 110.348C27.4929 109.856 27.851 109.407 28.3052 109.001H20.8008V105.908H35.9118C36.502 105.908 36.9945 105.861 37.3902 105.768C37.7859 105.674 38.1778 105.526 38.5652 105.323L39.6269 107.83C39.0878 108.283 38.4481 108.548 37.7063 108.627V108.625ZM36.0004 109.668C35.3682 109.192 34.522 108.953 33.4611 108.953H33.0061C32.0128 108.953 31.1786 109.184 30.5044 109.645C29.8309 110.105 29.4938 110.781 29.4938 111.671C29.4938 112.562 29.8309 113.241 30.5044 113.71C31.1786 114.178 32.1555 114.413 33.4356 114.413C34.5814 114.413 35.4531 114.187 36.0507 113.734C36.6491 113.28 36.9479 112.625 36.9479 111.766C36.9479 110.844 36.6318 110.145 36.0004 109.669V109.668Z" fill="#1C1919" fill-opacity="0.7"/>
              <path d="M37.6987 97.6838C36.5702 98.7696 35.0371 99.3125 33.0999 99.3125C31.8363 99.3125 30.7161 99.0938 29.7393 98.6565C28.7624 98.2191 28.0004 97.5707 27.4523 96.7119C26.9049 95.8531 26.6309 94.8141 26.6309 93.5956C26.6309 92.3771 26.8959 91.3773 27.4267 90.5027C27.9576 89.6281 28.6821 88.9645 29.5996 88.5114C30.5179 88.0582 31.5412 87.832 32.6697 87.832C33.2261 87.832 33.651 88.0002 33.9461 88.3357C34.2412 88.672 34.3883 89.1365 34.3883 89.7299V96.2437C35.0791 96.2437 35.6355 95.967 36.0559 95.412C36.4771 94.8578 36.6874 94.1347 36.6874 93.245C36.6874 92.5106 36.574 91.8901 36.3465 91.3819C36.119 90.8744 35.7946 90.425 35.3734 90.0345L37.1424 88.488C37.8496 89.0037 38.4015 89.6673 38.7972 90.4793C39.1928 91.2914 39.3911 92.2135 39.3911 93.2443C39.3911 95.1187 38.8272 96.5988 37.698 97.6846L37.6987 97.6838ZM31.786 90.9001C31.0449 90.9001 30.4428 91.1542 29.9795 91.6616C29.5163 92.169 29.2843 92.8137 29.2843 93.5949C29.2843 94.376 29.5163 94.9739 29.9795 95.4814C30.4428 95.9888 31.0449 96.2429 31.786 96.2429V90.9008V90.9001Z" fill="#1C1919" fill-opacity="0.7"/>
              <path d="M39.2931 78.0284C39.0746 78.3021 38.7961 78.4386 38.4589 78.4386C38.2908 78.4386 38.1646 78.4227 38.0798 78.3918L37.9281 78.3451L27.1133 82.5629V79.329L34.9721 76.6576L27.1133 74.0095V70.7756L38.6864 75.2514C39.0063 75.3766 39.2428 75.5718 39.3937 75.8372C39.5454 76.1034 39.6212 76.4857 39.6212 76.9856C39.6212 77.4071 39.5116 77.7554 39.2931 78.0284Z" fill="#1C1919" fill-opacity="0.7"/>
            </svg>
          </div>
          <div class="content">
            <h3>Stagiaire & Alternant pour <strong>Alpydev</strong></h3>
            <p>En tant que développeur web pendant
              mon stage de deuxième année et en alternance
              pendant ma troisième année d’étude </p>
          </div>
          <div class="date-action">
            <p>Aout 2023 - Juillet 2024</p>
          </div>
        </li>
        <li class="centerAppariation experience-item">
          <div class="container-img">
            <img src="/imgs/logo_rl2b.png" alt="">
          </div>
          <div class="content">
            <h3>Stagiaire pour <strong>RL2B design</strong></h3>
            <p>En tant que développeur web pendant
              mon stage de première année</p>
          </div>
          <div class="date-action">
            <p>Avril 2022 - Juin 2022</p>
          </div>
        </li>
        <li class="centerAppariation experience-item">
          <div class="container-img">
            <img src="/imgs/logo_mds.png" alt="">
          </div>
          <div class="content">
            <h3>Etudiant dans l’école <strong>MyDigitalSchool</strong></h3>
            <p>Cursus cycle web & multimédia
              spécialisation développement web</p>
          </div>
          <div class="date-action">
            <p>Septembre 2021</p>
          </div>
        </li>
      </ul>
    </section>
  </section>
</template>

<script setup>
import {gsap} from "gsap";
import {ScrollTrigger} from "gsap/ScrollTrigger";

onMounted(()=>{
  const centerApparariationElement = document.querySelectorAll('.centerAppariation');

  gsap.set('#experiences .rotateOpacity', { rotate : -15,opacity : 0,yPercent:-20})
  gsap.set('#experiences .centerAppariation', { top : 0, yPercent : 350, opacity : 0,rotate : -15})

  const timelineExperience = gsap.timeline({
    scrollTrigger : {
      trigger : '#experiences',
      pin : true,
      start : "top",
      end : '+=1200',
      scrub : 1,
      markers:true,
    }
  })
  timelineExperience.to(
      '#experiences .rotateOpacity',
      {
        rotate : 0,
        opacity : 1,
        yPercent : 0,
      }
  )

  let time = 0;
  centerApparariationElement.forEach((el,index)=>{
    const timelineCenterApparition = gsap.timeline();

    timelineCenterApparition.to(el, {
      yPercent : 0,
      opacity : 1,
      rotate : 0,
    })

    if(centerApparariationElement.length - 1 !== index){
      timelineCenterApparition.to(el,{
        yPercent: -150,
        opacity: 0,
        rotate : 15,
      })
    }
    time+=0.5
    timelineExperience.add(timelineCenterApparition,time);
  })

})

</script>